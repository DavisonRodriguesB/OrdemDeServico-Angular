<button type="button" 
        class="sm:hidden p-4 text-slate-900 bg-white border-b border-gray-200" 
        (click)="toggleSidebar()">
  <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
  </svg>
</button>

<aside [class.w-64]="!isCollapsed" [class.w-20]="isCollapsed"
  class="h-screen bg-white text-slate-900 flex flex-col transition-all duration-300 border-e border-gray-200 shadow-sm sticky top-0">

  <div class="flex items-center justify-between p-4 h-16 border-b border-gray-100 overflow-hidden">
    <h3 class="text-lg font-semibold tracking-tight text-slate-900 truncate transition-opacity duration-300" 
        [class.opacity-0]="isCollapsed" [class.w-0]="isCollapsed">
      <img src="assets/imagens/logo.png" 
          alt="Logo" class="h-25 w-auto object-contain">
    </h3>
    
    <button type="button" 
            (click)="toggleSidebar()"
            class="p-2 rounded-xl hover:bg-gray-100 text-slate-500 transition-colors">
      <svg class="w-5 h-5" [class.rotate-180]="isCollapsed" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 19l-7-7 7-7m8 14l-7-7 7-7" />
      </svg>
    </button>
  </div>

  <div class="flex-1 overflow-y-auto overflow-x-hidden pt-4 px-3">
    <ul class="space-y-1.5 font-semibold">
      
      <ng-container *ngTemplateOutlet="navItem; context: { route: '/dashboard', label: 'Dashboard', iconPath: 'M3 10l9-7 9 7v10a1 1 0 01-1 1h-5v-6H9v6H4a1 1 0 01-1-1z' }"></ng-container>
      
      <ng-container *ngTemplateOutlet="navItem; context: { route: '/service-order', label: 'Ordens de Serviço', iconPath: 'M9 12h6m-6 4h6M7 8h10M5 20h14a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v14a1 1 0 001 1z' }"></ng-container>
      
      <ng-container *ngTemplateOutlet="navItem; context: { route: '/teams', label: 'Equipes', iconPath: 'M17 20h5v-2a4 4 0 00-4-4h-1M9 20H4v-2a4 4 0 014-4h1m0-4a4 4 0 100-8 4 4 0 000 8zm6 4a4 4 0 100-8 4 4 0 000 8z' }"></ng-container>
      
      <ng-container *ngTemplateOutlet="navItem; context: { route: '/allocation', label: 'Alocar Serviços', iconPath: 'M7.5 21 3 16.5m0 0L7.5 12M3 16.5h13.5m0-13.5L21 7.5m0 0L16.5 12M21 7.5H7.5' }"></ng-container>
      
      <ng-container *ngTemplateOutlet="navItem; context: { route: '/routing', label: 'Roteirização', iconPath: 'M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z' }"></ng-container>
      
      <ng-container *ngTemplateOutlet="navItem; context: { route: '/reports', label: 'Relatórios', iconPath: 'M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z' }"></ng-container>

    </ul>
  </div>
</aside>

<ng-template #navItem let-route="route" let-label="label" let-iconPath="iconPath">
  <li>
    <a [routerLink]="route" 
       routerLinkActive="bg-slate-100 text-blue-600 ring-1 ring-slate-200"
       class="flex items-center p-3 rounded-xl text-slate-600 hover:bg-slate-50 hover:text-slate-900 group transition-all duration-200">
      <svg class="w-6 h-6 flex-shrink-0 transition duration-75" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" [attr.d]="iconPath" />
      </svg>
      <span class="ms-3 whitespace-nowrap" [class.hidden]="isCollapsed">{{ label }}</span>
    </a>
  </li>
</ng-template>